[toc]

### Vue篇

#### 写Vue时，为什么要在列表组件中写key，其作用是什么？
[Vue](https://cn.vuejs.org/v2/guide/list.html#%E7%BB%B4%E6%8A%A4%E7%8A%B6%E6%80%81)官网对于key是这样解释的：
>当Vue正在更新使用v-for的元素列表时，它默认适用"就地更新"的策略。如果数据项的顺序被改变，Vue将不会移动DOM元素来匹配数据项的顺序，而是就地更新每个元素，并确保它们在每个索引位置正确渲染。
这个默认的模式是高效的，但是只适用于不依赖子组件状态或临时DOM状态（例如：表单输入值）的列表渲染输出。
为了给Vue一个提示，以便它能跟踪每个节点的身份，从而重用和重新排序现有元素，你需要为每项提供一个唯一<font color=red>key</font> attribute。
建议尽可能在使用v-for时提供<font color=red>key</font> attribute，除非遍历输出的DOM内容非常简单，或者依赖默认行为以获取性能上的提升。

```js
<li v-for="i in list">{{i.text}}</li>
// list构造
const list = [];
for (let i = 0; i < 10000; i++) {
    list.push({
        text: i,
        id: i
    });
}
```
上面是一个简单的模板，不带key时节点可以复用，省去了销毁/创建组件的开销，同时只需要修改DOM文本内容而不是移除/添加节点，这就是文档上的"依赖默认行为以获取性能上的提升"。
这种适合渲染简单的无状态组件，若组件有状态时，不使用key时，可能会在维持组件状态时，产生不可预知的错误，如组件的动画等~
举个例子：一个列表中，有娱乐和新闻两个tab可以相互切换，访问过的会置灰，不带key时，从娱乐切到新闻时，由于组件复用，置灰状态被带了过来~所以这时需要一个唯一标识key，那么每次渲染时都会替换所有组件，使组件保持正确状态~

key标识是Vue进行diff算法需要比较的，关于diff算法，文章很多，我这里就不赘述了，[推荐一篇](https://github.com/aooy/blog/issues/2)

