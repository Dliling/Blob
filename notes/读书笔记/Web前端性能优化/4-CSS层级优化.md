CSS层对于页面性能的影响主要体现在以下几点：

1）CSS选择器查询定位的效率；

2）浏览器的渲染方式和CSS计算算法；

3）需要渲染的CSS文件内容的大小。

#### 4.1 样式多复用

降低重复部分的比例，以此减少冗余代码，减小CSS资源文件，提高可读性和网页性能，降低后期维护难度和后续样式调整时的触雷概率。

##### 4.1.1 样式继承与复用

多为提取公共样式到common文件中。

##### 4.1.2 尽量避免同一类名多次渲染

若不同人使用相同或类似样式时，尽量避免使用同一类名各自进行覆盖，可以提取公共样式到一个类，使用者再各自扩展一个类名来重写部分样式。

##### 4.1.3 少用高优先级选择器，慎用!important

先看下CSS选择器的优先级：

!important(1, 0, 0, 0) > 内联(在标签内定义stye属性) > ID选择器(0, 1, 0, 0) > 类(0, 0, 1, 0) > 标签 ｜ 伪类 ｜ 属性(0, 0, 0, 1) > 伪对象 > 通配符* > 继承

ID一般用于JS行为层，行为层与样式层的类名分开。

#### 4.2 CSS选择器

##### 4.2.1 伪类选择器的妙用

使用伪类选择器可以达到的效果，尽量不要用JS来实现，以此减少开发工作量，提高开发效率，一定程度上提升页面性能。

##### 4.2.2 忌层级过深的CSS选择器

理论上，浏览器会逐级寻找DOM树挂载的样式选择器，并将对应的样式渲染给它，这样会对性能产生一定的影响。

##### 4.2.3 不用曾经的CSS表达式

Expression(IE8以前)，在实际应用中会被反复地执行，一不小心会导致每秒钟执行成百上千次的计算和渲染，严重影响性能。如下所示：

```
input {
	star: Expression(
		onmouseover=function() {this.style.backgroundColor = "#fff"},
		onmouseout=function() {this.style.backgroundColor = "#f00"}
	)
}
```

上述内容简单了解即可。

像Sass、Less等预处理器编写时，经编译后，变成了静态资源文件。

##### 4.2.4 通配符*

重置浏览器默认样式

#### 4.3 减少“昂贵”的样式成本

##### 4.3.1 何为“昂贵”的样式

如过渡、阴影等，浏览器实际上会将这个样式风格接近的过渡色彩绘制到页面中，而这些像素级的变换需要大量的计算，虽说显示效果好，但还是要避免滥用。

- 绘制阴影：box-shadow
- 渐变：gradients（有线性渐变和径向渐变）
- 滤镜：filter
- 透明度：opacity
- 圆角：border-radius（浏览器元素实际都是长方形）

##### 4.3.2 减少浏览器重排和重绘

常见但容易忽略的如下：

- 改变font-size和font-family
- 改变元素的内外边距
- 通过JS改变CSS类
- 通过JS获取DOM元素的位置相关属性（如width，left等）
- CSS伪类激活
- 滚动滚动条或改变窗口大小

##### 4.3.3 避免float滥用

使用float会造成父元素塌陷等，实际会对性能有一定的影响。

可以使用display: inline-block。

#### 4.4 CSS层级其他优化

##### 4.4.1 CSS Sprite — 雪碧图

##### 4.4.2 充分利用强大的CSS3

CSS3可以实现的动画效果，不要使用JS来实现。

CSS3中有很多利用GPU加速的特性，利用transform: translateZ(0)开启，而transform不会出发重绘。

##### 4.4.3 media query媒体查询

响应式可以用媒体查询实现，而不是window.resize。